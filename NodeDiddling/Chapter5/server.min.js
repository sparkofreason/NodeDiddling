var http=require("http"),WSServer=require("C:/Users/Dave/AppData/Roaming/npm-cache/websocket/1.0.7/package/lib/websocket").server,url=require("url"),fs=require("fs"),clientHtml=fs.readFileSync("client.html"),plainHttpServer=http.createServer(function(n,t){t.writeHead(200,{"Content-type":"text/html"}),t.end(clientHtml)}),webSocketServer,accept;plainHttpServer.listen(8080),webSocketServer=new WSServer({httpServer:plainHttpServer}),accept=["localhost","127.0.0.1"];webSocketServer.on("request",function(n){if(n.origin=n.origin||"*",accept.indexOf(url.parse(n.origin).hostname)===-1){n.reject(),console.log("disallowed: "+n.origin);return}var t=n.accept(null,n.origin);t.on("message",function(i){console.log("Received: '"+i.utf8Data+"' from "+n.origin),i.utf8Data==="Hello"&&t.send("Web sockets!")});t.on("close",function(n,t){console.log("Disconnect: "+n+" - "+t)})})